{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es6.function.name.js","webpack:///./src/views/setup/storage.vue?00ef","webpack:///./src/views/setup/storage.vue?fc90","webpack:///src/views/setup/storage.vue","webpack:///./src/views/setup/storage.vue?62fa","webpack:///./src/views/setup/storage.vue"],"names":["dP","f","FProto","Function","prototype","nameRE","NAME","configurable","get","this","match","e","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","userInfo","role","is_admin","on","addClick","_e","_l","item","key","id","staticStyle","_s","name","getName","type","imgCount","turnSize","imgSize","$event","editClick","del","Number","total","page","size","$store","state","isMobile","pageChange","pageSizeChange","edit","creating","editSave","addSave","model","value","callback","$$v","showCreate","expression","ref","createData","$set","val","index","directives","rawName","getLabel","showDel","slot","modal_loading","delFunction","staticRenderFns","component"],"mappings":"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","file":"static/js/chunk-28ce6966.82c852b1.js","sourcesContent":["var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./storage.vue?vue&type=style&index=0&id=3cab3a53&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"page-content\"},[_c('div',{staticClass:\"container-fluid\"},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-head\"},[_vm._v(\"存储桶\")]),_c('div',{staticClass:\"card-body\"},[(_vm.loading)?_c('div',{staticClass:\"demo-spin-container\"},[_c('Spin',{attrs:{\"fix\":\"\",\"size\":\"large\"}})],1):_c('Row',{attrs:{\"gutter\":24}},[(_vm.userInfo.role.is_admin == 1)?_c('Col',{staticClass:\"ivu-mb\",attrs:{\"xxl\":6,\"xl\":8,\"lg\":12,\"md\":12,\"sm\":24,\"xs\":24}},[_c('Card',{staticClass:\"list-goods-list-item\"},[_c('div',{staticClass:\"main\",on:{\"click\":_vm.addClick}},[_c('Icon',{attrs:{\"type\":\"ios-add\",\"size\":\"18\"}}),_vm._v(\" 新建桶\\n              \")],1)])],1):_vm._e(),_vm._l((_vm.data),function(item){return _c('Col',{key:item.id,staticClass:\"ivu-mb\",attrs:{\"xxl\":6,\"xl\":8,\"lg\":12,\"md\":12,\"sm\":24,\"xs\":24}},[_c('Card',{staticClass:\"list-goods-list-item\"},[_c('div',{staticStyle:{\"padding\":\"16px\",\"height\":\"110px\"}},[_c('div',{staticClass:\"name\"},[_vm._v(\"\\n                  \"+_vm._s(item.name)+\"\\n                  \"),_c('Tag',{staticStyle:{\"float\":\"right\"},attrs:{\"color\":\"green\"}},[_vm._v(_vm._s(_vm.getName(item.type)))])],1),_c('div',{staticClass:\"explain\"},[_c('Tag',{attrs:{\"color\":\"default\"}},[_vm._v(\"图片数量：\"+_vm._s(item.imgCount))]),_c('br'),_c('Tag',{attrs:{\"color\":\"default\"}},[_vm._v(\"占用存储：\"+_vm._s(_vm.turnSize(item.imgSize)))])],1)]),(_vm.userInfo.role.is_admin == 1)?_c('div',{staticClass:\"btn-main\"},[_c('div',{staticClass:\"btn\",on:{\"click\":function($event){return _vm.editClick(item)}}},[_vm._v(\"编辑\")]),_c('div',{staticClass:\"btn\",on:{\"click\":function($event){return _vm.del(item.id)}}},[_vm._v(\"删除\")]),_c('div',{staticStyle:{\"clear\":\"both\"}})]):_vm._e()])],1)})],2),_c('div',{staticClass:\"paging\"},[_c('Page',{attrs:{\"total\":Number(_vm.total),\"current\":_vm.page,\"page-size\":_vm.size,\"simple\":_vm.$store.state.isMobile,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":_vm.pageChange,\"on-page-size-change\":_vm.pageSizeChange}})],1)],1)])])]),_c('Modal',{attrs:{\"width\":600,\"title\":_vm.edit ? '编辑桶' : '新增桶',\"loading\":_vm.creating,\"class-name\":\"vertical-center-modal\"},on:{\"on-ok\":function($event){_vm.edit ? _vm.editSave() : _vm.addSave()}},model:{value:(_vm.showCreate),callback:function ($$v) {_vm.showCreate=$$v},expression:\"showCreate\"}},[_c('Form',{ref:\"create\",attrs:{\"model\":_vm.createData,\"label-width\":130}},[_c('FormItem',{attrs:{\"label\":\"存储源\"}},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"请选择存储源\",\"disabled\":_vm.edit},model:{value:(_vm.createData.type),callback:function ($$v) {_vm.$set(_vm.createData, \"type\", $$v)},expression:\"createData.type\"}},_vm._l((_vm.sourceList),function(val,key,index){return _c('Option',{key:index,attrs:{\"value\":key}},[_vm._v(_vm._s(val))])}),1),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.edit),expression:\"!edit\"}],staticStyle:{\"font-size\":\"12px\",\"color\":\"red\"}},[_vm._v(\"\\n          * 添加成功后存储源不可修改\\n        \")])],1),_c('FormItem',{attrs:{\"label\":\"桶名称\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入自定义名称\"},model:{value:(_vm.createData.name),callback:function ($$v) {_vm.$set(_vm.createData, \"name\", $$v)},expression:\"createData.name\"}})],1),_c('FormItem',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.createData.type != 'local'),expression:\"createData.type != 'local'\"}],attrs:{\"label\":\"空间域名\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入空间域名\"},model:{value:(_vm.createData.space_domain),callback:function ($$v) {_vm.$set(_vm.createData, \"space_domain\", $$v)},expression:\"createData.space_domain\"}})],1),_c('FormItem',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.createData.type != 'local'),expression:\"createData.type != 'local'\"}],attrs:{\"label\":_vm.getLabel('AccessKey')}},[_c('Input',{attrs:{\"placeholder\":'请输入' + _vm.getLabel('AccessKey')},model:{value:(_vm.createData.AccessKey),callback:function ($$v) {_vm.$set(_vm.createData, \"AccessKey\", $$v)},expression:\"createData.AccessKey\"}})],1),_c('FormItem',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.createData.type != 'local'),expression:\"createData.type != 'local'\"}],attrs:{\"label\":_vm.getLabel('SecretKey')}},[_c('Input',{attrs:{\"placeholder\":'请输入' + _vm.getLabel('AccessKey')},model:{value:(_vm.createData.SecretKey),callback:function ($$v) {_vm.$set(_vm.createData, \"SecretKey\", $$v)},expression:\"createData.SecretKey\"}})],1),_c('FormItem',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.createData.type == 'cos' || _vm.createData.type == 'oss'),expression:\"createData.type == 'cos' || createData.type == 'oss'\"}],attrs:{\"label\":\"所属地域\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入所属地域\"},model:{value:(_vm.createData.region),callback:function ($$v) {_vm.$set(_vm.createData, \"region\", $$v)},expression:\"createData.region\"}})],1),_c('FormItem',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.createData.type != 'local'),expression:\"createData.type != 'local'\"}],attrs:{\"label\":\"空间名称\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入空间名称 bucket\"},model:{value:(_vm.createData.bucket),callback:function ($$v) {_vm.$set(_vm.createData, \"bucket\", $$v)},expression:\"createData.bucket\"}})],1)],1)],1),_c('Modal',{attrs:{\"width\":\"360\"},model:{value:(_vm.showDel),callback:function ($$v) {_vm.showDel=$$v},expression:\"showDel\"}},[_c('p',{staticStyle:{\"color\":\"#f60\"},attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('Icon',{attrs:{\"type\":\"ios-information-circle\"}}),_c('span',[_vm._v(\"删除确认\")])],1),_c('div',[_c('p',[_vm._v(\"\\n        为安全起见，删除桶会删除系统内此桶的所有数据，但不会删除此桶内已有的图片文件；通俗的讲就是删除桶后不会影响之前上传的图片链接，但系统将会无法管理之前的图片，仍可以前往服务器图片文件所在文件夹或所属对象存储控制台管理\\n      \")])]),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{attrs:{\"type\":\"error\",\"size\":\"large\",\"long\":\"\",\"loading\":_vm.modal_loading},on:{\"click\":_vm.delFunction}},[_vm._v(\"确认删除\")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div class=\"page-content\">\r\n      <div class=\"container-fluid\">\r\n        <div class=\"card\">\r\n          <div class=\"card-head\">存储桶</div>\r\n          <div class=\"card-body\">\r\n            <div class=\"demo-spin-container\" v-if=\"loading\">\r\n                <Spin fix size=\"large\"></Spin>\r\n              </div>\r\n            <Row :gutter=\"24\" v-else>\r\n              <Col :xxl=\"6\" :xl=\"8\" :lg=\"12\" :md=\"12\" :sm=\"24\" :xs=\"24\" class=\"ivu-mb\" v-if=\"userInfo.role.is_admin == 1\">\r\n              <Card class=\"list-goods-list-item\">\r\n                <div class=\"main\" @click=\"addClick\">\r\n                  <Icon type=\"ios-add\" size=\"18\" /> 新建桶\r\n                </div>\r\n              </Card>\r\n              </Col>\r\n              <Col :xxl=\"6\" :xl=\"8\" :lg=\"12\" :md=\"12\" :sm=\"24\" :xs=\"24\" class=\"ivu-mb\" v-for=\"item in data\"\r\n                :key=\"item.id\">\r\n              <Card class=\"list-goods-list-item\">\r\n                <div style=\"padding: 16px;height:110px\">\r\n                  <div class=\"name\">\r\n                    {{ item.name }}\r\n                    <Tag color=\"green\" style=\"float: right\">{{\r\n                        getName(item.type)\r\n                      }}</Tag>\r\n                  </div>\r\n                  <div class=\"explain\">\r\n                    <Tag color=\"default\">图片数量：{{ item.imgCount}}</Tag><br />\r\n                    <Tag color=\"default\">占用存储：{{ turnSize(item.imgSize)}}</Tag>\r\n                  </div>\r\n                </div>\r\n                <div class=\"btn-main\" v-if=\"userInfo.role.is_admin == 1\">\r\n                  <div class=\"btn\" @click=\"editClick(item)\">编辑</div>\r\n                  <div class=\"btn\" @click=\"del(item.id)\">删除</div>\r\n                  <div style=\"clear: both\"></div>\r\n                </div>\r\n              </Card>\r\n              </Col>\r\n            </Row>\r\n            <div class=\"paging\">\r\n              <Page :total=\"Number(total)\" :current=\"page\" :page-size=\"size\" :simple=\"$store.state.isMobile\"\r\n                @on-change=\"pageChange\" @on-page-size-change=\"pageSizeChange\" show-total show-sizer show-elevator />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <Modal v-model=\"showCreate\" :width=\"600\" :title=\"edit ? '编辑桶' : '新增桶'\" :loading=\"creating\"\r\n      @on-ok=\"edit ? editSave() : addSave()\" class-name=\"vertical-center-modal\">\r\n      <Form ref=\"create\" :model=\"createData\" :label-width=\"130\">\r\n        <FormItem label=\"存储源\">\r\n          <Select v-model=\"createData.type\" style=\"width: 200px\" placeholder=\"请选择存储源\" :disabled=\"edit\">\r\n            <Option v-for=\"(val, key,index) in sourceList\" :value=\"key\" :key=\"index\">{{ val }}</Option>\r\n          </Select>\r\n          <p style=\"font-size:12px;color:red\" v-show=\"!edit\">\r\n            * 添加成功后存储源不可修改\r\n          </p>\r\n        </FormItem>\r\n        <FormItem label=\"桶名称\">\r\n          <Input v-model=\"createData.name\" placeholder=\"请输入自定义名称\" />\r\n        </FormItem>\r\n        <FormItem label=\"空间域名\" v-show=\"createData.type != 'local'\">\r\n          <Input v-model=\"createData.space_domain\" placeholder=\"请输入空间域名\" />\r\n        </FormItem>\r\n\r\n        <FormItem :label=\"getLabel('AccessKey')\" v-show=\"createData.type != 'local'\">\r\n          <Input v-model=\"createData.AccessKey\" :placeholder=\"'请输入' + getLabel('AccessKey')\" />\r\n        </FormItem>\r\n        <FormItem :label=\"getLabel('SecretKey')\" v-show=\"createData.type != 'local'\">\r\n          <Input v-model=\"createData.SecretKey\" :placeholder=\"'请输入' + getLabel('AccessKey')\" />\r\n        </FormItem>\r\n\r\n        <FormItem label=\"所属地域\" v-show=\"createData.type == 'cos' || createData.type == 'oss'\">\r\n          <Input v-model=\"createData.region\" placeholder=\"请输入所属地域\" />\r\n        </FormItem>\r\n        <FormItem label=\"空间名称\" v-show=\"createData.type != 'local'\">\r\n          <Input v-model=\"createData.bucket\" placeholder=\"请输入空间名称 bucket\" />\r\n        </FormItem>\r\n\r\n      </Form>\r\n    </Modal>\r\n\r\n    <Modal v-model=\"showDel\" width=\"360\">\r\n      <p slot=\"header\" style=\"color: #f60\">\r\n        <Icon type=\"ios-information-circle\"></Icon>\r\n        <span>删除确认</span>\r\n      </p>\r\n      <div>\r\n        <p>\r\n          为安全起见，删除桶会删除系统内此桶的所有数据，但不会删除此桶内已有的图片文件；通俗的讲就是删除桶后不会影响之前上传的图片链接，但系统将会无法管理之前的图片，仍可以前往服务器图片文件所在文件夹或所属对象存储控制台管理\r\n        </p>\r\n      </div>\r\n      <div slot=\"footer\">\r\n        <Button type=\"error\" size=\"large\" long :loading=\"modal_loading\" @click=\"delFunction\">确认删除</Button>\r\n      </div>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {\r\n    getStorage,\r\n    postStorage,\r\n    putStorage,\r\n    delStorage,\r\n    getStorageType\r\n  } from \"@/api/index\";\r\n  import {\r\n    toSize\r\n  } from \"@/utils/index\"\r\n  import {\r\n    mapState\r\n  } from \"vuex\";\r\n  export default {\r\n    data() {\r\n      return {\r\n        showCreate: false,\r\n        showDel: false,\r\n        creating: true,\r\n        loading: true,\r\n        modal_loading: false,\r\n        edit: false,\r\n        createData: {},\r\n        sourceList: {},\r\n        data: [],\r\n        page: 1,\r\n        size: 10,\r\n        total: \"\",\r\n        delId: \"\",\r\n      };\r\n    },\r\n    computed: {\r\n      ...mapState([\"userInfo\"]),\r\n      getLabel() {\r\n        return (value) => {\r\n          if (value == \"AccessKey\") {\r\n            if (this.createData.type == \"oss\") {\r\n              return \"AccessKey ID\";\r\n            }\r\n            if (this.createData.type == \"cos\") {\r\n              return \"secretId\";\r\n            }\r\n            if (this.createData.type == \"kodo\") {\r\n              return \"AccessKey\";\r\n            }\r\n          } else {\r\n            if (this.createData.type == \"oss\") {\r\n              return \"AccessKey Secret\";\r\n            }\r\n            if (this.createData.type == \"cos\") {\r\n              return \"secretKey\";\r\n            }\r\n            if (this.createData.type == \"kodo\") {\r\n              return \"SecretKey\";\r\n            }\r\n          }\r\n        };\r\n      },\r\n      turnSize() {\r\n        return (val) => {\r\n          return toSize(val)\r\n        };\r\n      },\r\n      getName() {\r\n        return (value) => {\r\n          for (let key in this.sourceList) {\r\n            if (value == key) {\r\n              return this.sourceList[key]\r\n            }\r\n          }\r\n        };\r\n      },\r\n    },\r\n    created() {\r\n      this._getData();\r\n      this._getStorageType();\r\n    },\r\n\r\n    methods: {\r\n      del(id) {\r\n        this.delId = id;\r\n        this.showDel = true;\r\n      },\r\n      // 删除方法\r\n      delFunction() {\r\n        this.modal_loading = true\r\n        delStorage({\r\n          id: this.delId,\r\n        }).then((res) => {\r\n          if (res.code == 200) {\r\n            this.$Message.success({\r\n              background: true,\r\n              content: res.msg,\r\n            });\r\n            this._getData();\r\n          } else {\r\n            this.$Message.error({\r\n              background: true,\r\n              content: res.msg,\r\n            });\r\n          }\r\n          this.modal_loading = false\r\n          this.showDel = false\r\n        });\r\n      },\r\n      //  新增按钮\r\n      addClick() {\r\n        this.edit = false;\r\n        this.showCreate = true;\r\n        this.createData = {\r\n          name: \"\",\r\n          type: \"local\",\r\n          space_domain: \"\",\r\n          AccessKey: \"\",\r\n          SecretKey: \"\",\r\n          region: \"\",\r\n          bucket: \"\",\r\n        };\r\n      },\r\n      // 获取列表\r\n      _getData() {\r\n        this.loading = true\r\n        getStorage({\r\n          page: this.page,\r\n          size: this.size,\r\n        }).then((res) => {\r\n          this.loading = false\r\n          this.data = res.data.data;\r\n          this.total = res.data.total;\r\n        });\r\n      },\r\n      _getStorageType() {\r\n        getStorageType().then((res) => {\r\n          this.sourceList = res.data\r\n        });\r\n      },\r\n\r\n      // 新增\r\n      addSave() {\r\n        if (!this.createData.name) {\r\n          this.nextTick()\r\n          return this.$Message.error({\r\n            background: true,\r\n            content: \"名称不能为空\",\r\n          });\r\n        }\r\n        postStorage({\r\n          name: this.createData.name,\r\n          type: this.createData.type,\r\n          space_domain: this.createData.space_domain,\r\n          AccessKey: this.createData.AccessKey,\r\n          SecretKey: this.createData.SecretKey,\r\n          region: this.createData.region,\r\n          bucket: this.createData.bucket,\r\n        }).then((res) => {\r\n          if (res.code == 200) {\r\n            this.$Message.success({\r\n              background: true,\r\n              content: res.msg,\r\n            });\r\n            this.showCreate = false;\r\n            this._getData();\r\n          } else {\r\n            this.$Message.error({\r\n              background: true,\r\n              content: res.msg,\r\n            });\r\n          }\r\n          this.nextTick()\r\n        });\r\n      },\r\n\r\n      //  编辑按钮\r\n      editClick(row) {\r\n        this.edit = true;\r\n        this.showCreate = true;\r\n        this.createData = {\r\n          ...row,\r\n        };\r\n      },\r\n      // 编辑\r\n      editSave() {\r\n        if (!this.createData.name) {\r\n          this.nextTick()\r\n          return this.$Message.error({\r\n            background: true,\r\n            content: \"名称不能为空\",\r\n          });\r\n        }\r\n        putStorage({\r\n          id: this.createData.id,\r\n          name: this.createData.name,\r\n          type: this.createData.type,\r\n          space_domain: this.createData.space_domain,\r\n          AccessKey: this.createData.AccessKey,\r\n          SecretKey: this.createData.SecretKey,\r\n          region: this.createData.region,\r\n          bucket: this.createData.bucket,\r\n        }).then((res) => {\r\n          if (res.code == 200) {\r\n            this.$Message.success({\r\n              background: true,\r\n              content: res.msg,\r\n            });\r\n            this.showCreate = false;\r\n            this._getData();\r\n          } else {\r\n            this.$Message.error({\r\n              background: true,\r\n              content: res.msg,\r\n            });\r\n          }\r\n          this.nextTick()\r\n        });\r\n      },\r\n\r\n      // 分页跳转\r\n      pageChange(val) {\r\n        this.page = val;\r\n        this._getData();\r\n      },\r\n      pageSizeChange(val) {\r\n        this.page = 1;\r\n        this.size = val;\r\n        this._getData();\r\n      },\r\n      nextTick() {\r\n        this.creating = false;\r\n        this.$nextTick(() => {\r\n          this.creating = true;\r\n        });\r\n      }\r\n    },\r\n  };\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .list-goods-list-item {\r\n    margin-bottom: 20px;\r\n    // height: 156px;\r\n\r\n    .main {\r\n      line-height: 151px;\r\n      text-align: center;\r\n      cursor: pointer;\r\n    }\r\n\r\n    .main:hover {\r\n      color: #2d8cf0;\r\n      background: rgba(25, 129, 243, 0.07);\r\n    }\r\n\r\n    .name {\r\n      font-size: 16px;\r\n      font-weight: 600;\r\n      color: #000000;\r\n    }\r\n\r\n    .btn-main {\r\n      border-top: 1px solid #e5e9f3;\r\n\r\n      .btn {\r\n        width: 50%;\r\n        float: left;\r\n        text-align: center;\r\n        padding: 10px;\r\n        cursor: pointer;\r\n        position: relative;\r\n      }\r\n\r\n      .btn:hover {\r\n        color: red;\r\n      }\r\n    }\r\n\r\n    .btn-main .btn:first-child {\r\n      border-right: 1px solid #e5e9f3;\r\n    }\r\n\r\n    .btn-main .btn:first-child:hover {\r\n      color: #2d8cf0;\r\n    }\r\n\r\n    .explain {\r\n      font-size: 14px;\r\n      color: #000000;\r\n      margin-top: 5px;\r\n    }\r\n\r\n    /deep/.ivu-card-body {\r\n      padding: 0 !important;\r\n    }\r\n  }\r\n\r\n \r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./storage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./storage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./storage.vue?vue&type=template&id=3cab3a53&scoped=true&\"\nimport script from \"./storage.vue?vue&type=script&lang=js&\"\nexport * from \"./storage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./storage.vue?vue&type=style&index=0&id=3cab3a53&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3cab3a53\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}